From 4239c3134d0b794eb89629c96ca76ac3a389446b Mon Sep 17 00:00:00 2001
From: Liu Haitao <haitao.liu@windriver.com>
Date: Fri, 3 Feb 2023 01:53:46 +0000
Subject: [PATCH] tests: add CLAR_FIXTURES_DIR for ptest

Signed-off-by: Liu Haitao <haitao.liu@windriver.com>
---
 tests/CMakeLists.txt | 7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)

diff --git a/tests/CMakeLists.txt b/tests/CMakeLists.txt
index 6f8a18ec0..468b360ca 100644
--- a/tests/CMakeLists.txt
+++ b/tests/CMakeLists.txt
@@ -4,8 +4,11 @@ IF(NOT PYTHONINTERP_FOUND)
   MESSAGE(FATAL_ERROR "Could not find a python interpeter, which is needed to build the tests. "
     "Make sure python is available, or pass -DBUILD_CLAR=OFF to skip building the tests")
 ENDIF()
-
-SET(CLAR_FIXTURES "${CMAKE_CURRENT_SOURCE_DIR}/resources/")
+IF (CLAR_FIXTURES_DIR) 
+	SET(CLAR_FIXTURES "${CLAR_FIXTURES_DIR}/resources/")
+ELSE()
+	SET(CLAR_FIXTURES "${CMAKE_CURRENT_SOURCE_DIR}/resources/")
+ENDIF()
 SET(CLAR_PATH "${CMAKE_CURRENT_SOURCE_DIR}")
 ADD_DEFINITIONS(-DCLAR_FIXTURE_PATH=\"${CLAR_FIXTURES}\")
 ADD_DEFINITIONS(-DCLAR_TMPDIR=\"libgit2_tests\")
-- 
2.31.1

